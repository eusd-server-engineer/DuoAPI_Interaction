# Duo Student Account Deletion Report

**Date**: September 22, 2025
**Time**: 14:47 (2:47 PM)
**Operation**: Student Account Cleanup

## ✅ DELETION COMPLETED SUCCESSFULLY

### Summary Statistics
- **Total Duo Users Before**: 2,967
- **Student Accounts Identified**: 80
- **Accounts Successfully Deleted**: 80
- **Errors**: 0
- **Directory-Managed Accounts Skipped**: 0

### Operation Details
- All 80 student accounts (6-digit usernames) were successfully removed
- These accounts were created through inadvertent self-enrollment when ADFS was misconfigured
- All deleted accounts were unmanaged (not directory-synced), so deletion was safe
- Accounts have been moved to Duo's trash and will be permanently deleted based on your retention policy

### Backup & Audit Trail
- **Full User Backup**: `backups\duo_users_backup_20250922_144738.json` (2,967 users)
- **Operation Log**: `logs\duo_cleanup_20250922_144738.log`
- **Detailed Results**: `logs\duo_cleanup_results_20250922_144738.csv`

### Deleted Account IDs
All 80 accounts with the following 6-digit IDs were deleted:
754115, 748145, 748814, 767875, 750558, 750482, 748447, 763163, 747624, 763673,
747715, 765605, 750063, 745230, 745324, 749085, 744367, 746527, 748513, 747385,
748171, 755212, 759333, 757835, 745321, 764835, 751200, 770908, 761142, 771449,
748580, 747323, 752091, 750531, 747125, 752430, 743613, 750899, 744183, 749577,
746819, 764794, 746020, 747777, 745946, 750962, 748677, 769363, 754287, 772906,
751204, 765725, 747746, 748295, 765332, 752146, 763480, 750223, 748109, 744089,
755263, 755581, 755697, 756420, 752192, 747929, 767434, 747527, 770933, 770785,
759767, 752382, 751726, 751214, 750872, 751860, 753076, 770828, 762891, 742763

## Next Steps - IMPORTANT

### 1. Prevent Future Issues
To prevent this from happening again, you should:

1. **Change New User Policy** (CRITICAL):
   - Go to Duo Admin Panel → Applications → Your ADFS App
   - Set **New user policy** to **"Deny access"**
   - This prevents unknown users from self-enrolling

2. **Restrict Access by Group**:
   - In the same application settings
   - Set **Permitted groups** to staff-only groups
   - This prevents students from reaching the Duo flow

3. **Review Other Applications**:
   - Check all other Duo-protected applications
   - Ensure they have appropriate new user policies
   - Verify group restrictions are in place

### 2. Verify Deletion
You can verify the deletion by:
1. Searching for any of the deleted usernames in Duo Admin Panel
2. Checking the Duo Authentication Log for deletion events
3. Confirming users appear in the Trash section

### 3. Monitor
- Watch for any new student accounts being created
- Set up alerts for unusual enrollment activity
- Regular audits of user accounts

## Technical Details
- **API Endpoint Used**: `DELETE /admin/v1/users/[user_id]`
- **Rate Limiting**: 800ms delay between operations (successfully avoided rate limits)
- **Total Operation Time**: Approximately 2 minutes
- **API Calls Made**: 80 deletions + initial user listing

## Contact
If you need to recover any of these accounts, they should be available in Duo's trash for your configured retention period (typically 7-30 days).

---
*Report generated by Duo API Interaction Tool*